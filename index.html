<!DOCTYPE html>
<html>
<head>
  <title>Survey for Binary Classification of Texture Images</title>
  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  <script>
    const images = [
      { url: '/images/image_1.jpg', name: 'Image 1' },
      { url: '/images/image_2.jpg', name: 'Image 2' },
      { url: '/images/image_3.jpg', name: 'Image 3' },
	  { url: '/images/image_4.jpg', name: 'Image 4' },
	  { url: '/images/image_5.jpg', name: 'Image 5' },
	  { url: '/images/image_6.jpg', name: 'Image 6' },
	  { url: '/images/image_7.jpg', name: 'Image 7' },
	  { url: '/images/image_8.jpg', name: 'Image 8' },
	  { url: '/images/image_9.jpg', name: 'Image 9' },
	  { url: '/images/image_10.jpg', name: 'Image 10' },
	  { url: '/images/image_11.jpg', name: 'Image 11' },
      { url: '/images/image_12.jpg', name: 'Image 12' },
	  { url: '/images/image_13.jpg', name: 'Image 13' },
	  { url: '/images/image_14.jpg', name: 'Image 14' },
	  { url: '/images/image_15.jpg', name: 'Image 15' },
	  { url: '/images/image_16.jpg', name: 'Image 16' },
	  { url: '/images/image_17.jpg', name: 'Image 17' },
	  { url: '/images/image_18.jpg', name: 'Image 18' },
	  { url: '/images/image_19.jpg', name: 'Image 19' },
	  { url: '/images/image_20.jpg', name: 'Image 20' },
	  { url: '/images/image_21.jpg', name: 'Image 21' },
      { url: '/images/image_22.jpg', name: 'Image 22' },
	  { url: '/images/image_23.jpg', name: 'Image 23' },
	  { url: '/images/image_24.jpg', name: 'Image 24' },
	  { url: '/images/image_25.jpg', name: 'Image 25' },
	  { url: '/images/image_26.jpg', name: 'Image 26' },
	  { url: '/images/image_27.jpg', name: 'Image 27' },
	  { url: '/images/image_28.jpg', name: 'Image 28' },
	  { url: '/images/image_29.jpg', name: 'Image 29' },
	  { url: '/images/image_30.jpg', name: 'Image 30' },
	  { url: '/images/image_31.jpg', name: 'Image 31' },
      { url: '/images/image_32.jpg', name: 'Image 32' },
	  { url: '/images/image_33.jpg', name: 'Image 33' },
	  { url: '/images/image_34.jpg', name: 'Image 34' },
	  { url: '/images/image_35.jpg', name: 'Image 35' },
	  { url: '/images/image_36.jpg', name: 'Image 36' },
	  { url: '/images/image_37.jpg', name: 'Image 37' },
	  { url: '/images/image_38.jpg', name: 'Image 38' },
	  { url: '/images/image_39.jpg', name: 'Image 39' },
	  { url: '/images/image_40.jpg', name: 'Image 40' },
	  { url: '/images/image_41.jpg', name: 'Image 41' },
      { url: '/images/image_42.jpg', name: 'Image 42' },
	  { url: '/images/image_43.jpg', name: 'Image 43' },
	  { url: '/images/image_44.jpg', name: 'Image 44' },
	  { url: '/images/image_45.jpg', name: 'Image 45' },
	  { url: '/images/image_46.jpg', name: 'Image 46' },
	  { url: '/images/image_47.jpg', name: 'Image 47' },
	  { url: '/images/image_48.jpg', name: 'Image 48' },
	  { url: '/images/image_49.jpg', name: 'Image 49' },
	  { url: '/images/image_50.jpg', name: 'Image 50' },
	  { url: '/images/image_51.jpg', name: 'Image 51' },
{ url: '/images/image_52.jpg', name: 'Image 52' },
{ url: '/images/image_53.jpg', name: 'Image 53' },
{ url: '/images/image_54.jpg', name: 'Image 54' },
{ url: '/images/image_55.jpg', name: 'Image 55' },
{ url: '/images/image_56.jpg', name: 'Image 56' },
{ url: '/images/image_57.jpg', name: 'Image 57' },
{ url: '/images/image_58.jpg', name: 'Image 58' },
{ url: '/images/image_59.jpg', name: 'Image 59' },
{ url: '/images/image_60.jpg', name: 'Image 60' },
{ url: '/images/image_61.jpg', name: 'Image 61' },
{ url: '/images/image_62.jpg', name: 'Image 62' },
{ url: '/images/image_63.jpg', name: 'Image 63' },
{ url: '/images/image_64.jpg', name: 'Image 64' },
{ url: '/images/image_65.jpg', name: 'Image 65' },
{ url: '/images/image_66.jpg', name: 'Image 66' },
{ url: '/images/image_67.jpg', name: 'Image 67' },
{ url: '/images/image_68.jpg', name: 'Image 68' },
{ url: '/images/image_69.jpg', name: 'Image 69' },
{ url: '/images/image_70.jpg', name: 'Image 70' },
{ url: '/images/image_71.jpg', name: 'Image 71' },
{ url: '/images/image_72.jpg', name: 'Image 72' },
{ url: '/images/image_73.jpg', name: 'Image 73' },
{ url: '/images/image_74.jpg', name: 'Image 74' },
{ url: '/images/image_75.jpg', name: 'Image 75' },
{ url: '/images/image_76.jpg', name: 'Image 76' },
{ url: '/images/image_77.jpg', name: 'Image 77' },
{ url: '/images/image_78.jpg', name: 'Image 78' },
{ url: '/images/image_79.jpg', name: 'Image 79' },
{ url: '/images/image_80.jpg', name: 'Image 80' },
{ url: '/images/image_81.jpg', name: 'Image 81' },
{ url: '/images/image_82.jpg', name: 'Image 82' },
{ url: '/images/image_83.jpg', name: 'Image 83' },
{ url: '/images/image_84.jpg', name: 'Image 84' },
{ url: '/images/image_85.jpg', name: 'Image 85' },
{ url: '/images/image_86.jpg', name: 'Image 86' },
{ url: '/images/image_87.jpg', name: 'Image 87' },
{ url: '/images/image_88.jpg', name: 'Image 88' },
{ url: '/images/image_89.jpg', name: 'Image 89' },
{ url: '/images/image_90.jpg', name: 'Image 90' },
{ url: '/images/image_91.jpg', name: 'Image 91' },
{ url: '/images/image_92.jpg', name: 'Image 92' },
{ url: '/images/image_93.jpg', name: 'Image 93' },
{ url: '/images/image_94.jpg', name: 'Image 94' },
{ url: '/images/image_95.jpg', name: 'Image 95' },
{ url: '/images/image_96.jpg', name: 'Image 96' },
{ url: '/images/image_97.jpg', name: 'Image 97' },
{ url: '/images/image_98.jpg', name: 'Image 98' },
{ url: '/images/image_99.jpg', name: 'Image 99' },
{ url: '/images/image_100.jpg', name: 'Image 100' }
    ]; // Add your image URLs here

    const results = [];

    function submitSelection() {
      const nameInput = document.getElementById('name-input');
      const name = nameInput.value.trim();
      if (name === '') {
        alert('Please enter your name.');
        return;
      }

      const selectedOptions = [];

      const imageContainers = document.getElementsByClassName('image-container');
      for (let i = 0; i < imageContainers.length; i++) {
        const imageContainer = imageContainers[i];
        const selectedOption = imageContainer.querySelector('.active');

        if (selectedOption) {
          const value = parseInt(selectedOption.dataset.value);
          selectedOptions.push(value);
        }
      }
	  console.log(selectedOptions.length==imageContainers.length)
	  console.log(imageContainers.length)
	  console.log(selectedOptions.length)
	  if (selectedOptions.length==imageContainers.length){
	  const payload = {
        name: name,
        selections: selectedOptions,
      }

      axios.post('/results', { data: payload })
        .then(() => {
          alert('Results submitted successfully.');
          results.length = 0; // Clear the results array
        })
        .catch((error) => {
          console.error('Failed to submit results:', error);
        });}
		else{
	  alert("Please select a label for all the images")
	  }
    }
		
	function zoomImage(imageUrl) {
      const zoomContainer = document.getElementById('zoom-container');
      const zoomedImage = document.getElementById('zoomed-image');

      zoomedImage.src = imageUrl;
      zoomContainer.style.display = 'flex';
    }

    function closeZoom() {
      const zoomContainer = document.getElementById('zoom-container');
      zoomContainer.style.display = 'none';
    }
	
    window.addEventListener('DOMContentLoaded', () => {
      const imageContainer = document.getElementById('image-container');

      let rowDiv;
      let imagesInRow = 0;

      images.forEach((image, index) => {
        if (imagesInRow === 0) {
          rowDiv = document.createElement('div');
          rowDiv.classList.add('image-row');
        }

        const imageElement = document.createElement('img');
        imageElement.src = image.url;
        imageElement.classList.add('image');

        const nameElement = document.createElement('p');
        nameElement.textContent = image.name;

        const label0Button = document.createElement('button');
        label0Button.textContent = 'Label 0';
        label0Button.dataset.value = '0';
        label0Button.classList.add('label-button');

        const label1Button = document.createElement('button');
        label1Button.textContent = 'Label 1';
        label1Button.dataset.value = '1';
        label1Button.classList.add('label-button');

        const imageContainerDiv = document.createElement('div');
        imageContainerDiv.classList.add('image-container');
        imageContainerDiv.appendChild(imageElement);
        imageContainerDiv.appendChild(nameElement);
        imageContainerDiv.appendChild(label0Button);
        imageContainerDiv.appendChild(label1Button);

        rowDiv.appendChild(imageContainerDiv);
        imagesInRow++;

        if (imagesInRow === 5) {
          imageContainer.appendChild(rowDiv);
          imagesInRow = 0;
		  
        }
      });

      if (imagesInRow > 0) {
        imageContainer.appendChild(rowDiv);
      }

      const labelButtons = document.querySelectorAll('.label-button');
      labelButtons.forEach((button) => {
        button.addEventListener('click', () => {
          const activeButton = button.parentNode.querySelector('.active');
          if (activeButton) {
            activeButton.classList.remove('active');
          }
          button.classList.add('active');
        });
      });
	  
	  const imageContainers = document.getElementsByClassName('image-container');
      for (let i = 0; i < imageContainers.length; i++) {
        const imageContainer = imageContainers[i];
        const imageElement = imageContainer.querySelector('img');

        imageElement.addEventListener('click', () => {
          const imageUrl = imageElement.src;
          zoomImage(imageUrl);
        });
	   }
    });
  </script>
  <style>
  body{
  margin:0;
  padding:0;
  background-color:#F0F8FF;
  }
    .image-container {
      display: inline-block;
      margin: 10px;
      text-align: center;
    }

    .image-row {
      text-align: center;
    }

    img {
      width: 100%;
      height: 200px;
    }
    
    p {
      margin: 5px 0;
    }
    h1{
		text-align: center;
	}
    .label-button {
      padding: 10px 20px;
      margin: 5px;
      font-size: 16px;
      border: none;
      border-radius: 5px;
      background-color: #e0e0e0;
      cursor: pointer;
    }
    
    .label-button.active {
      background-color: #a9a9a9;
    }
	#inputele{
		display:flex;
		justify-content:center;
	}
	 .drivelink{
	text-decoration:none;
	display:flex;
	justify-content:right;
	}
	
	#zoom-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.7);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 9999;
    }

    #zoomed-image {
	  max-width: 100%;
	  max-height: 100%;
	  width: auto;
	  height: auto;
	  position: absolute;
	  top: 0;
	  bottom: 0;
	  left: 0;
	  right: 0;
	  margin: auto;
	}

    #zoom-close {
      position: absolute;
      top: 10px;
      right: 10px;
      color: #fff;
      font-size: 24px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <h1>Survey for Binary Classification of Texture Images</h1>
  <div id="inputele">
    <label for="name-input">Name:</label>
    <input type="text" id="name-input" required>
  </div>
  <p>    Below are 100 images where each image belongs to one of two classes(Class 0 and Class 1).</p>
  <p>    Choose a label for each image to assign a class to it. All 100 answers and the name are mandatory to submit the form.</p>
  <p>    You can also download the images using the given link to have a detailed look at the images if you would like to.</p>
  <a href="https://drive.google.com/drive/folders/1qOFuwdh2Ss7UBLApTHhUlpT_IABH9vmc?usp=sharing" class="drivelink" target="_blank">Drivelink for Images</a>
  <div id="image-container"></div>
  <button onclick="submitSelection()" style="display: block; margin: 0 auto; padding: 10px 20px; background-color: #4CAF50; color: white; font-size: 16px; border: none; border-radius: 4px; cursor: pointer;">Submit</button>
  <div id="zoom-container">
    <span id="zoom-close" onclick="closeZoom()">&times;</span>
    <img id="zoomed-image" alt="Zoomed Image">
  </div>
</body>
</html>
